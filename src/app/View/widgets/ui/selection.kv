#:include View/widgets/ui/highlighted_border.kv

<LabledSelectionParams@Widget>
	text: ''
	active: False
	chbx_active: lambda ch, val: None
	chbx_state: lambda ch, val: None


# Selection with text label
<LabledSelection@ButtonBehavior+BoxLayout+LabledSelectionParams>
	orientation: "horizontal"

	on_press: selection_checkbox._do_press()

	# NOTE: Don't forget to set group in other widgets!
	group: 'select_rw'

	MDCheckbox:
		id: selection_checkbox
		group: root.group

		size_hint_x: .3

		label_text: root.text
		active: root.active
		on_active: root.chbx_active(*args)
		on_state: root.chbx_state(*args)

	MDLabel:
		id: text_label

		text: root.text

		pos_hint: {"center_y": .5}


<ModeBoxParams@Widget>
	read_on_active: lambda ch, val: None
	read_on_state: lambda ch, val: None
	write_on_active: lambda ch, val: None
	write_on_state: lambda ch, val: None

	border_color: self.parent.theme_cls.divider_color
	border_width: 1


<ModeBox@MDBoxLayout+HighlightedBorderWidget+ModeBoxParams>
	orientation: "horizontal"

	LabledSelection:
		id: read
		active: True
		text: "read"

		chbx_active: root.read_on_active
		chbx_state: root.read_on_state

	LabledSelection:
		id: write
		text: "write"

		chbx_active: root.write_on_active
		chbx_state: root.write_on_state


<SelectMode@MDAnchorLayout+ModeBoxParams>
	anchors: "center"

	read_checkbox: mode_box.ids.read
	write_checkbox: mode_box.ids.write

	ModeBox:
		id: mode_box
		size_hint: .95, .95

		read_on_active: root.read_on_active
		read_on_state: root.read_on_state
		write_on_active: root.write_on_active
		write_on_state: root.write_on_state
