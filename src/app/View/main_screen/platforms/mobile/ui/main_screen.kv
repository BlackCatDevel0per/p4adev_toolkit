#:import MDExtendedTextField app.View.widgets.ext_txtfield.MDExtendedTextField
#:import AboutDialog app.View.widgets.about_dialog.AboutDialog

#:include View/main_screen/platforms/mobile/ui/main_navbar.kv
#:include View/widgets/ui/logview.kv
#:include View/widgets/ui/selection.kv


<HighlightedBorderScrollView@MDScrollView+HighlightedBorderWidget>


<HighlightedBorderLayout@MDAnchorLayout+HighlightedBorderWidget>


<MainScreenView>

	MDBoxLayout:
		id: main_bl
		orientation: "vertical"

		MDTopAppBar:
			id: main_bar
			# title: "MDTopAppBar"
			left_action_items:
				[["menu", lambda x: main_nav_drawer.set_state("open")]]

		MDBoxLayout:
			id: main_bl_startup_tools
			orientation: "vertical"
			padding: "20dp"
			spacing: "5dp"

			# FIXME: Property issues on multiple widgets..
			# TODO: Autoscroll down option & checkbox
			MDLogView:
				id: log_view
				# text: 'data\n'*100

				# FIXME: Mb better use app's theme class directly to choose color?
				border_color: self.parent.theme_cls.primary_color

			# cleanable layout for field widget
			# HighlightedBorderScrollView:
			HighlightedBorderLayout:
				id: layout_write_txtfield
				border_color: self.parent.theme_cls.divider_color
				border_width: 1
				# always_overscroll: False
				size_hint_y: .20

				# There will be text input

			# TODO: Startup check if `docs_path` exists & available permission
			# TODO: Checkboxes for: read, write
			SelectMode:
				id: rw_checkboxes
				size_hint_y: .15

				# FIXME: Make read uncheckable & design && handle it
				read_on_active: root.controller.selection_on_read_active

			# TODO: Mode text input (with validation by category - read, write)
			# TODO: Data text input on write checkbox
			# TODO: Execute button.. (raised, flat or etc.)

			# Spacer
			MDBoxLayout:
				size_hint_x: None

	MainNavDrawer:
		id: main_nav_drawer
